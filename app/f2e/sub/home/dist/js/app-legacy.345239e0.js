(function(e){function n(n){for(var r,s,a=n[0],c=n[1],u=n[2],f=0,p=[];f<a.length;f++)s=a[f],o[s]&&p.push(o[s][0]),o[s]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);l&&l(n);while(p.length)p.shift()();return i.push.apply(i,u||[]),t()}function t(){for(var e,n=0;n<i.length;n++){for(var t=i[n],r=!0,a=1;a<t.length;a++){var c=t[a];0!==o[c]&&(r=!1)}r&&(i.splice(n--,1),e=s(s.s=t[0]))}return e}var r={},o={app:0},i=[];function s(n){if(r[n])return r[n].exports;var t=r[n]={i:n,l:!1,exports:{}};return e[n].call(t.exports,t,t.exports,s),t.l=!0,t.exports}s.m=e,s.c=r,s.d=function(e,n,t){s.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:t})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,n){if(1&n&&(e=s(e)),8&n)return e;if(4&n&&"object"===typeof e&&e&&e.__esModule)return e;var t=Object.create(null);if(s.r(t),Object.defineProperty(t,"default",{enumerable:!0,value:e}),2&n&&"string"!=typeof e)for(var r in e)s.d(t,r,function(n){return e[n]}.bind(null,r));return t},s.n=function(e){var n=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(n,"a",n),n},s.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},s.p="/sub/home/dist/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=n,a=a.slice();for(var u=0;u<a.length;u++)n(a[u]);var l=c;i.push([0,"chunk-vendors"]),t()})({0:function(e,n,t){e.exports=t("56d7")},"106f":function(e,n,t){},"21bb":function(e,n,t){"use strict";var r=t("8776"),o=t.n(r);o.a},"56d7":function(e,n,t){"use strict";t.r(n);t("cadf"),t("551c"),t("097d"),t("d1e7"),t("bf40");var r=t("2b0e"),o=t("ce5b"),i=t.n(o),s=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-app",[t("v-toolbar",{staticClass:"blue",attrs:{app:"",light:"",fixed:!0}},[t("v-toolbar-side-icon",{attrs:{light:""}}),t("v-toolbar-title",{staticClass:"white--text"},[e._v("www.picoluna.com")]),t("v-spacer"),t("v-toolbar-items")],1),t("v-content",[t("v-container",{attrs:{fluid:""}},[t("router-view")],1)],1)],1)},a=[],c=(t("5c0b"),t("2877")),u={},l=Object(c["a"])(u,s,a,!1,null,null,null),f=l.exports,p=t("8c4f"),b=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("div",{staticClass:"page-home"},[e.permission&&"granted"!==e.permission?t("v-btn",{attrs:{color:"info"},nativeOn:{click:function(n){return e.requestPermission(n)}}},[e._v("Subscript notifications\n  ")]):e._e(),"granted"===e.permission?t("v-btn",{attrs:{color:"info"},nativeOn:{click:function(n){return e.unsubscribe(n)}}},[e._v("Unsubscribe notifications\n  ")]):e._e()],1)},d=[],v=t("8afe"),h=(t("34ef"),t("a481"),t("14b9"),t("96cf"),t("3040")),m={name:"home",components:{},data:function(){return{permission:""}},mounted:function(){this.checkPermission()},methods:{checkPermission:function(){"Notification"in window&&(this.permission=window.Notification.permission)},requestPermission:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var n,t,r,o,i,s,a,c,u;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("Notification"in window&&"serviceWorker"in navigator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,window.Notification.requestPermission();case 4:if(n=e.sent,this.permission=n,console.log("Permission: ".concat(n)),"granted"===n){e.next=9;break}return e.abrupt("return");case 9:return e.next=11,navigator.serviceWorker.ready;case 11:return t=e.sent,e.next=14,t.pushManager.getSubscription();case 14:if(r=e.sent,r&&r.endpoint){e.next=27;break}return e.next=18,fetch("/api/v1/web_push/vapid/");case 18:return o=e.sent,e.next=21,o.json();case 21:return i=e.sent,s=i.data.publicKey,a=this.urlBase64ToUint8Array(s),e.next=26,t.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:a});case 26:r=e.sent;case 27:return e.next=29,fetch("/api/v1/web_push/subscription/",{headers:{"Content-Type":"application/json"},method:"POST",body:JSON.stringify({subscription:r})});case 29:return c=e.sent,e.next=32,c.json();case 32:u=e.sent,"success"!==u.status&&console.error("subscribe error.");case 34:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),unsubscribe:function(){var e=Object(h["a"])(regeneratorRuntime.mark(function e(){var n,t,r,o,i;return regeneratorRuntime.wrap(function(e){while(1)switch(e.prev=e.next){case 0:if("serviceWorker"in navigator){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,navigator.serviceWorker.ready;case 4:return n=e.sent,e.next=7,n.pushManager.getSubscription();case 7:if(t=e.sent,t){e.next=10;break}return e.abrupt("return");case 10:return e.next=12,t.unsubscribe();case 12:if(r=e.sent,r){e.next=16;break}return console.log("Failed"),e.abrupt("return");case 16:return e.next=18,fetch("/api/v1/web_push/subscription/",{headers:{"Content-Type":"application/json"},method:"DELETE",body:JSON.stringify({subscription:t})});case 18:return o=e.sent,e.next=21,o.json();case 21:i=e.sent,"success"!==i.status&&console.error("unsubscribe error.");case 23:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),urlBase64ToUint8Array:function(e){var n="=".repeat((4-e.length%4)%4),t=(e+n).replace(/\-/g,"+").replace(/_/g,"/"),r=window.atob(t);return Uint8Array.from(Object(v["a"])(r).map(function(e){return e.charCodeAt(0)}))}}},g=m,w=(t("21bb"),Object(c["a"])(g,b,d,!1,null,null,null)),y=w.exports;r["default"].use(p["a"]);var x=new p["a"]({mode:"history",base:"/",routes:[{path:"*",name:"home",component:y}]}),k=t("2f62");r["default"].use(k["a"]);var O=new k["a"].Store({state:{},mutations:{},actions:{}}),j=t("9483");Object(j["a"])("/service-worker.js",{ready:function(e){console.log("App is being served from cache by a service worker.\nFor more details, visit https://goo.gl/AFskqB")},cached:function(e){console.log("Content has been cached for offline use.")},updated:function(e){console.log("New content is available; please refresh.")},offline:function(){console.log("No internet connection found. App is running in offline mode.")},error:function(e){console.error("Error during service worker registration:",e)}}),r["default"].config.productionTip=!1,r["default"].use(i.a),new r["default"]({router:x,store:O,render:function(e){return e(f)}}).$mount("#app")},"5c0b":function(e,n,t){"use strict";var r=t("106f"),o=t.n(r);o.a},8776:function(e,n,t){}});
//# sourceMappingURL=app-legacy.345239e0.js.map